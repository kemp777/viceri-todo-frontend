<app-navbar></app-navbar>
<div class="container" style="max-width: 500px; margin-top: 50px;">

  <h2 class="text-center mb-4">Nova Tarefa</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label>Descrição</label>
      <input
        formControlName="description"
        type="text"
        class="form-control"
        [class.is-invalid]="form.get('description')?.invalid && form.get('description')?.touched"
      />
      <div class="invalid-feedback">
        A descrição é obrigatória.
      </div>
    </div>

    <div class="mb-3">
      <label>Prioridade</label>
      <select
        formControlName="priority"
        class="form-select"
        [class.is-invalid]="form.get('priority')?.invalid && form.get('priority')?.touched"
      >
        <option value="Selecionar" disabled selected>Selecione a prioridade</option>
        <option value="Alta">Alta</option>
        <option value="Média">Média</option>
        <option value="Baixa">Baixa</option>
      </select>
      <div class="invalid-feedback">
        A prioridade é obrigatória.
      </div>
    </div>

    <div class="d-flex justify-content-between">
      <a class="btn btn-secondary" routerLink="/tasks">Voltar</a>

      <button
        type="submit"
        class="btn btn-success"
        [disabled]="form.invalid || form.get('priority')?.value === 'Selecionar'">
        Salvar
      </button>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger mt-3 text-center">
      {{ errorMessage }}
    </div>
  </form>
</div>
